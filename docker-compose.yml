version: '2'
volumes:
    metabase_data:
networks:
    rede_metabase:
services:
    metabase_db:
        build: /postgres
        volumes:
            - metabase_data:/

networks:
  banco:
web:
services:
db:
image: postgres:9.6
volumes:
# Volume dos dados
- dados:/var/lib/postgresql/data
# Scripts
- ./scripts:/scripts
- ./scripts/init.sql:/docker-entrypoint-initdb.d/init.sql
networks:
- banco
app:
image: python:3.6
volumes:
# Aplicação
- ./app:/app
working_dir: /app
command: bash ./app.sh
networks: 3
- banco
- web
depends_on: 4
- db